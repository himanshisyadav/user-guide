
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>[LAMMPS](http://lammps.sandia.gov/) - RCC User Guide</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lammps" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="RCC User Guide" class="md-header__button md-logo" aria-label="RCC User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RCC User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              [LAMMPS](http://lammps.sandia.gov/)
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="RCC User Guide" class="md-nav__button md-logo" aria-label="RCC User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    RCC User Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://rcc.uchicago.edu/accounts-allocations" class="md-nav__link">
        Accounts and Allocations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Midway2 and Midway3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Midway2 and Midway3" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Midway2 and Midway3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_hardware_overview/" class="md-nav__link">
        Hardware Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_connecting/" class="md-nav__link">
        Connecting to Midway
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Data Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Data Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_data_transfer/" class="md-nav__link">
        Data Transfer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_data_storage/" class="md-nav__link">
        Data Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_file_permissions/" class="md-nav__link">
        File System Permissions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Running Jobs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Running Jobs" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Running Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_jobs_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_submitting_jobs/" class="md-nav__link">
        Submitting Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_job_management/" class="md-nav__link">
        Managing Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/example_job_scripts/" class="md-nav__link">
        Example Job Submission Scripts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../midway_software_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6_2" type="checkbox" id="__nav_3_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6_2">
          Commonly Used Applications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Commonly Used Applications" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_6_2">
          <span class="md-nav__icon md-icon"></span>
          Commonly Used Applications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway3_python.md" class="md-nav__link">
        Python and Conda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway3_jupyter.md" class="md-nav__link">
        Jupyter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway3_tf_pytorch.md" class="md-nav__link">
        Tensorflow and PyTorch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway3_software_list.md" class="md-nav__link">
        List of All Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway3_software_requests.md" class="md-nav__link">
        Request New Software
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway_troubleshooting/" class="md-nav__link">
        Troubleshooting and FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Specialized Systems and Partitions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Specialized Systems and Partitions" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Specialized Systems and Partitions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://sde-midwayr.rcc.uchicago.edu/user-guide/" class="md-nav__link">
        MidwayR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://dali.uchicago.edu/using-dali/" class="md-nav__link">
        Beagle3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://dali.uchicago.edu/using-dali/" class="md-nav__link">
        DaLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://midwayssd.rcc.uchicago.edu/using-midwayssd/" class="md-nav__link">
        MidwaySSD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://dali.uchicago.edu/using-dali/" class="md-nav__link">
        Skyway
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../user_policy/" class="md-nav__link">
        RCC User Policy
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Help
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Help" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Help
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../general_faq/" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contact_us.md" class="md-nav__link">
        Contact Us
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    Quick Start
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intro-of-lammps" class="md-nav__link">
    Intro of LAMMPS
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-best-performance" class="md-nav__link">
    Get Best Performance
  </a>
  
    <nav class="md-nav" aria-label="Get Best Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opt" class="md-nav__link">
    OPT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-omp" class="md-nav__link">
    USER-OMP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-intel" class="md-nav__link">
    USER-INTEL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#benchmarks" class="md-nav__link">
    Benchmarks
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" class="md-nav__link">
    Copyright
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="lammps"><a href="http://lammps.sandia.gov/">LAMMPS</a></h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li>
<p>Quick Start</p>
</li>
<li>
<p>Intro of LAMMPS</p>
</li>
<li>
<p>Get Best Performance</p>
</li>
<li>
<p>Benchmarks</p>
</li>
<li>
<p>Copyright</p>
</li>
</ul>
<h2 id="quick-start">Quick Start</h2>
<p>If you’re familiar with LAMMPS software, this section gives you quick steps of using LAMMPS, which has been
installed and optimized on the Midway cluster at RCC. LAMMPS is installed with RCC Module system. You can use either of the following commands to load it into the
shell environment:</p>
<div class="highlight"><pre><span></span><code>module load lammps
</code></pre></div>
<p>This module is built from the SVN source hosted at svn://svn.icms.temple.edu/lammps-ro/trunk, Version 30Sep14.
The SVN trunk provides the up-to-date code from LAMMPS developers. The optimiztion package “OPT” is compiled
along with this binary:</p>
<div class="highlight"><pre><span></span><code>module load lammps-plumed
</code></pre></div>
<p>This module is built from the TARBALL source hosted at <a href="http://lammps.sandia.gov/download.html">http://lammps.sandia.gov/download.html</a>, Version 5Sep14, which is the latest stable
distribution. There are two important features in this installation: (1) two packages USER-OMP and USER-INTEL were added for optimization;
(2) The offsite pakcage “USER-PLUMED” was added to provide free energy techniques.</p>
<p>After loading either of the two modules, you can run LAMMPS with the binary “lmp_intelmpi”. Although the two modules were compiled with different vesions of Intel MPI
libraries, the module system can automatically load the correct one. A typical SLURM script of running LAMMPS jobs is following:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/sh</span>

<span class="c1">#SBATCH --job-name=lammps</span>
<span class="c1">#SBATCH --output=lammps-%j.out</span>
<span class="c1">#SBATCH --constraint=ib</span>
<span class="c1">#SBATCH --exclusive</span>
<span class="c1">#SBATCH --nodes=4</span>

module load lammps
mpirun lmp_intelmpi &lt; <span class="k">in</span>.lj 
</code></pre></div>
<p>GPU support has been also patched in lammps-plumed module. Two packages, GPU and USER-CUDE were compiled with CUDA-4.2. The module is named with suffix
with suffix of “-cuda” for you to load or use them:</p>
<div class="highlight"><pre><span></span><code>module load lammps-plumed/5Sep14-cuda+intelmpi-5.0+intel-15.0
mpirun lmp_intelmpi-cuda -c on -sf cuda &lt; in.lj
</code></pre></div>
<h2 id="intro-of-lammps">Intro of LAMMPS</h2>
<p>LAMMPS is a simulation software for particle systems. It is specially designed for molecular dynamics technique and large-scalse parallel
simulations. It is an open-source code and developed and maintained by Sandia National Liboratory (SNL). It has been widely used for studies
of methodology &amp; algorithm developments and simulations of material science, chemistry, physics and biology.</p>
<p>For more information of LAMMPS, please visit its offical website: <a href="http://http//lammps.sandia.gov/">http://http//lammps.sandia.gov/</a></p>
<p>To gain more advice of using LAMMPS efficiently, please read its discussion section on “Acceleration” at: <a href="http://lammps.sandia.gov/doc/Section_accelerate.html">http://lammps.sandia.gov/doc/Section_accelerate.html</a></p>
<h2 id="get-best-performance">Get Best Performance</h2>
<p>The module lammps-plumed is installed with following packages:</p>
<p>ASPHERE BODY    CLASS2  COLLOID DIPOLE  FLD     GRANULAR        MANYBODY        KSPACE  MC      MISC    MOLECULE        REPLICA
RIGID   SHOCK   SRD     USER-CG-CMM     USER-EFF        USER-FEP        USER-LB USER-MISC       USER-MOLFILE    USER-OMP        USER-SPH
USER-PLUMED     USER-INTEL</p>
<p>To know more information about these packages, please read <a href="http://lammps.sandia.gov/doc/Section_start.html#start_3">http://lammps.sandia.gov/doc/Section_start.html#start_3</a> If you need other packages
to be installed in this module, please contact <a href="mailto:yuxing@uchicago.edu">yuxing@uchicago.edu</a></p>
<p>The binaries of LAMMPS compiled here are aim to provide RCC users the optimized solutions. Therefore, three important packages are specially
discussed here: OPT, USER-OMP and USER-INTEL.</p>
<h3 id="opt"><strong>OPT</strong></h3>
<p>Quote from LAMMPS website: “<em>The OPT package was developed by James Fischer (High Performance Technologies), David Richie, and Vincent Natoli
(Stone Ridge Technologies). It contains a handful of pair styles whose compute() methods were rewritten in C++ templated form to reduce the
overhead due to if tests and other conditional code.</em>”</p>
<p>To use OPT acceleration, you just need to put “-sf opt” in your job command:</p>
<div class="highlight"><pre><span></span><code>Ex: lmp_intelmpi -sf opt &lt; lj.in
</code></pre></div>
<p>However, only part of pair-styles are optimized in this package.</p>
<h3 id="user-omp"><strong>USER-OMP</strong></h3>
<p>The USER-OMP package was developed by Axel Kohlmeyer at Temple University. The purpose of package is to introduce the OpenMP/MPI hybrid
parallel scheme into LAMMPS to gain benefits from the state-of-art multicore processors. Therefore, the parallel jobs are run in the
combination of <strong>SMP threads</strong> x <strong>MPI tasks</strong>.</p>
<p>For example, if you request the resource of 64 cores (4 nodes) on Sandyb partition through SLURM systems, you can choose different
combination (16x4, 8x8, 4x16, et al) to receive the optimal performace. To do this, please set the following options correctly. For example,
if I want to run 8 MPI tasks total, and each of them allocate 8 threads, which means one MPI task per Sandy-Bridge processor:</p>
<div class="highlight"><pre><span></span><code>--nnodes=4           // allocate 4 nodes total
--ntasks-per-node=2  // execute 2 MPI tasks per node (1 per processor)
--cpus-per-task=8    // allocate 8 openmp threads per MPI task
</code></pre></div>
<p>You can also set environment variable OMP_NUM_THREADS=8 for this. (Not neccessary)</p>
<p>Besides, you need to also turn on the OMP suffix in job command:</p>
<div class="highlight"><pre><span></span><code>Ex: lmp_intelmpi -sf omp &lt; lj.in
</code></pre></div>
<p>At the beginning of the LAMMPS in-script (i.e., lj.in in this example), you need to also specify the loading of pacakge by:</p>
<div class="highlight"><pre><span></span><code>package omp $N
</code></pre></div>
<p>$N is the number of OMP threads, which equals to 8 in this example.</p>
<p>Unfortunately we didn’t a boost of speed on this hybrid code. For most of the cases, OMP_NUM_THREADS=1 gives the best performance,
which means hybrid isn’t actually used. <strong>However, the USER-OMP pacakge did optimize lots of the codes, from different force calculations to
integrations, which results a significant acceleration although OMP_NUM_THREADS=1 is used.</strong></p>
<h3 id="user-intel"><strong>USER-INTEL</strong></h3>
<p>This is a very new package that was developed by Intel technicians. The purpose of this pacakages is to implement the MIC support into
LAMMPS. However, without having a MIC card, the code can be also accelerated a lot on CPU-only clusters, because the codes were rewritten to
support the INTEL AVX vectoring tenchnique. USER-INTEL also provides a large number of optimized codes for LAMMPS functions.</p>
<p>To use OPT acceleration, you just need to put “-sf opt” in your job command:</p>
<div class="highlight"><pre><span></span><code>Ex: lmp_intelmpi -sf intel &lt; lj.in
</code></pre></div>
<p>At the beginning of the LAMMPS in-script (i.e., lj.in in this example), you need to also specify the loading of pacakge by:</p>
<div class="highlight"><pre><span></span><code>package intel
</code></pre></div>
<h2 id="benchmarks">Benchmarks</h2>
<p>Testing infomation:</p>
<div class="highlight"><pre><span></span><code>Hardware: Haswell E5-2660 v3. (2.6GHz, 20 core) DDR4, 2133MHz
System: Pure water box (100 x 100 x 100 A^3), 95,577 atoms
PPPM: double precision FFTW3, 1E-4
CUTOFF: 10A
Steps: 1000
</code></pre></div>
<p>| Timings</p>
<p>| Plain</p>
<p>| OPT</p>
<p>| USER-OMP</p>
<p>| USER-INTEL</p>
<p>|
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------- | --------------- | ---------- |  |  |  |  |  |  |  |  |  |  |
| Total</p>
<div class="highlight"><pre><span></span><code>                               | 50.07

                                                                                                                                                                                                                                                                                                                                           | 45.20

                                          | 41.41

       | 33.75

  |
</code></pre></div>
<p>| Pair</p>
<div class="highlight"><pre><span></span><code>                                | 37.55

                                                                                                                                                                                                                                                                                                                                           | 33.11

                                          | 29.07

       | 21.54

  |
</code></pre></div>
<p>| Kspace</p>
<div class="highlight"><pre><span></span><code>                              | 6.48

                                                                                                                                                                                                                                                                                                                                            | 6.86

                                           | 5.89

        | 5.75

   |
</code></pre></div>
<p>| Neighbor</p>
<div class="highlight"><pre><span></span><code>                            | 3.18

                                                                                                                                                                                                                                                                                                                                            | 2.29

                                           | 3.08

        | 2.95

   |
</code></pre></div>
<p>| Communication</p>
<div class="highlight"><pre><span></span><code>                       | 0.90

                                                                                                                                                                                                                                                                                                                                            | 0.85

                                           | 1.02

        | 1.01

   |
</code></pre></div>
<p>| Output</p>
<div class="highlight"><pre><span></span><code>                              | 0.01

                                                                                                                                                                                                                                                                                                                                            | 0.01

                                           | 0.01

        | 0.01

   |
</code></pre></div>
<p>| Other</p>
<div class="highlight"><pre><span></span><code>                               | 1.60

                                                                                                                                                                                                                                                                                                                                            | 1.76

                                           | 2.07

        | 2.12

   |
</code></pre></div>
<p><em>Numbers are in seconds. Lower is better.</em></p>
<h2 id="copyright">Copyright</h2>
<p>To get the permission of using the content (text, images and benchmark data) of this document in anywhere else,
please send an Email to <a href="mailto:yuxing@uchicago.edu">yuxing@uchicago.edu</a>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>