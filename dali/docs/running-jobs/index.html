
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Index - RCC User Guide</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-jobs-on-dali" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="RCC User Guide" class="md-header__button md-logo" aria-label="RCC User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RCC User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Index
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="RCC User Guide" class="md-nav__button md-logo" aria-label="RCC User Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    RCC User Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://rcc.uchicago.edu/accounts-allocations" class="md-nav__link">
        Accounts and Allocations
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Midway2 and Midway3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Midway2 and Midway3" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Midway2 and Midway3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_getting_started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_hardware_overview/" class="md-nav__link">
        Hardware Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_connecting/" class="md-nav__link">
        Connecting to Midway
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_4">
          Data Management
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Management" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Data Management
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_data_transfer/" class="md-nav__link">
        Data Transfer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_data_storage/" class="md-nav__link">
        Data Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_file_permissions/" class="md-nav__link">
        File System Permissions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_5">
          Running Jobs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Running Jobs" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Running Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_jobs_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_submitting_jobs/" class="md-nav__link">
        Submitting Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_job_management/" class="md-nav__link">
        Managing Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/examples/example_job_scripts/" class="md-nav__link">
        Example Job Submission Scripts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/software/midway_software_overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6_2" type="checkbox" id="__nav_3_6_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_6_2">
          Commonly Used Applications
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Commonly Used Applications" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_6_2">
          <span class="md-nav__icon md-icon"></span>
          Commonly Used Applications
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway3_python.md" class="md-nav__link">
        Python and Conda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway3_jupyter.md" class="md-nav__link">
        Jupyter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway3_tf_pytorch.md" class="md-nav__link">
        Tensorflow and PyTorch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway3_software_list.md" class="md-nav__link">
        List of All Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway3_software_requests.md" class="md-nav__link">
        Request New Software
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../midway23/midway_troubleshooting/" class="md-nav__link">
        Troubleshooting and FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Specialized Systems and Partitions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Specialized Systems and Partitions" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Specialized Systems and Partitions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://sde-midwayr.rcc.uchicago.edu/user-guide/" class="md-nav__link">
        MidwayR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://dali.uchicago.edu/using-dali/" class="md-nav__link">
        Beagle3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://dali.uchicago.edu/using-dali/" class="md-nav__link">
        DaLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://midwayssd.rcc.uchicago.edu/using-midwayssd/" class="md-nav__link">
        MidwaySSD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://dali.uchicago.edu/using-dali/" class="md-nav__link">
        Skyway
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../user_policy/" class="md-nav__link">
        RCC User Policy
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Help
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Help" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Help
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../general_faq/" class="md-nav__link">
        Frequently Asked Questions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../contact_us.md" class="md-nav__link">
        Contact Us
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#login-nodes-vs-compute-nodes" class="md-nav__link">
    Login nodes vs. compute nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service-units-and-allocations" class="md-nav__link">
    Service Units and Allocations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-your-account-balance" class="md-nav__link">
    Checking your account balance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types-of-compute-nodes" class="md-nav__link">
    Types of Compute Nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interactive-jobs" class="md-nav__link">
    Interactive Jobs
  </a>
  
    <nav class="md-nav" aria-label="Interactive Jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sinteractive" class="md-nav__link">
    sinteractive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#srun" class="md-nav__link">
    srun
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#batch-jobs" class="md-nav__link">
    Batch Jobs¶
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-jobs" class="md-nav__link">
    Managing Jobs
  </a>
  
    <nav class="md-nav" aria-label="Managing Jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checking-your-jobs" class="md-nav__link">
    Checking your jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#canceling-your-jobs" class="md-nav__link">
    Canceling your jobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-limits" class="md-nav__link">
    Job Limits
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporary-file-storage" class="md-nav__link">
    Temporary File Storage
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="running-jobs-on-dali">Running jobs on DaLi</h1>
<p>This section of DaLi user guide is about running computations on the DaLi compute nodes. All jobs running on compute nodes consume Service Units (SUs); see <a href="https://rcc.uchicago.edu/getting-started/user-guidelines">RCC Service Units</a> for more information.</p>
<h2 id="login-nodes-vs-compute-nodes">Login nodes vs. compute nodes</h2>
<p>Once you have connected to DaLi, you may work on one of the login nodes. Login nodes may be used for compiling and debugging code, installing software, editing and managing files, submitting jobs, or any other work that is not long-running or computationally intensive. <em>Login nodes should not be used for computionally intensive work</em>.</p>
<p>The Midway compute cluster, including DaLi, uses a scheduler to manage requests for access to compute resources. These requests are called jobs. In particular, we use the <a href="http://slurm.schedmd.com/">Slurm</a> resource manager to schedule jobs as well as interactive access to compute nodes.</p>
<p>Here, we give the essential information you need to know to start computing on Midway. For more detailed information on running specialized compute jobs, see <a href="https://rcc.uchicago.edu/docs/running-jobs/index.html#running-jobs">Running jobs on Midway</a>.</p>
<h2 id="service-units-and-allocations">Service Units and Allocations</h2>
<p>Service Units (SUs) are a measure of the amount of computing resources consumed on a compute cluster. Computing resources in a compute cluster include processing units (also called CPUs or cores), memory, and Graphical Processing Units (GPUs). The aim of the Service Unit (SU) is to provide a “fair” account of computing resources. For more information, please refer to the <a href="https://rcc.uchicago.edu/getting-started/user-guidelines">RCC Service Units</a> webpage.</p>
<p>An “allocation” is a quantity of computing time (SUs) and storage resources that are granted to a group of users, usually a lab managed by a principal investigator (PI). Without an allocation, you cannot schedule and run jobs on the RCC compute cluster. For more information about SU allocations, see <a href="https://rcc.uchicago.edu/getting-started/request-allocation">RCC Allocations</a>.</p>
<h2 id="checking-your-account-balance">Checking your account balance</h2>
<p>The rcchelp tool can be used to check account balances. After logging into Midway, simply type:</p>
<div class="highlight"><pre><span></span><code>$ rcchelp balance
</code></pre></div>
<p>If you are a member of multiple groups, this will display the allocations and usage for all your groups. The <code>rcchelp balance</code> command has a number of options for summarizing allocation usage. For information on these options, type</p>
<div class="highlight"><pre><span></span><code>$ rcchelp balance --help
</code></pre></div>
<p>To see an overall summary of your usage, simply enter:</p>
<div class="highlight"><pre><span></span><code>$ rcchelp usage
</code></pre></div>
<p>You can also get a more detailed breakdown of your usage by job using the <code>--byjob</code> option:</p>
<div class="highlight"><pre><span></span><code>$ rcchelp usage --byjob
</code></pre></div>
<p>For more options available in the <code>rcchelp</code> tool, type</p>
<div class="highlight"><pre><span></span><code>$ rcchelp --help
</code></pre></div>
<h2 id="types-of-compute-nodes">Types of Compute Nodes</h2>
<p>The Midway compute cluster, including DaLi, is made up of compute nodes with a variety architectures and configurations. Currently, DaLi has 30 nodes with the following specifications:</p>
<table>
<thead>
<tr>
<th align="left">Cluster</th>
<th align="left">Partition</th>
<th align="left">Compute cores (CPUs) per node</th>
<th align="left">Memory</th>
<th align="left">Other configuraiton details</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Dali</td>
<td align="left"><code>dali</code></td>
<td align="left">2 SkyLake processors (40 CPUs)</td>
<td align="left">64 GB DDR4</td>
<td align="left">EDR and FDR Infiniband interconnect</td>
</tr>
</tbody>
</table>
<h2 id="interactive-jobs">Interactive Jobs</h2>
<p>After submitting an “interactive job” on Midway, the Slurm job scheduler will connect you to a compute node, and will load up an interactive shell environment for you to use on that compute node. This interactive session will persist until you disconnect from the compute node, or until you reach the maximum requested time. The default requested time is 2 hours.</p>
<h3 id="sinteractive"><code>sinteractive</code></h3>
<p>The command <code>sinteractive</code> is the recommended Slurm command for requesting an interactive session. As soon as the requested resources become available, <code>sinteractive</code> will do the following:</p>
<ul>
<li>Log in to the node.</li>
<li>Change into the directory you were working in.</li>
<li>Set up X11 forwarding for displaying graphics.</li>
<li>Transfer your current shell environment, including any modules you have previously loaded.</li>
</ul>
<p>To get started (with the default interactive settings), simply enter <code>sinteractive</code> in the command line:</p>
<div class="highlight"><pre><span></span><code>$ sinteractive
</code></pre></div>
<p>By default, an interactive session times out after 2 hours. If you would like more than 2 hours, be sure to include a --<code>time=HH:MM:SS</code> flag to specify the necessary amount of time. For example, to request an interactive session for 6 hours, run the following command:</p>
<div class="highlight"><pre><span></span><code>$ sinteractive --time=06:00:00
</code></pre></div>
<p>There are many additional options for the <code>sinteractive</code> command, including options to select the number of nodes, the number of cores per node, the amount of memory, and so</p>
<div class="highlight"><pre><span></span><code>$ sinteractive --exclusive --partition=dali --nodes=2 --time=08:00:00
</code></pre></div>
<p>For more details about these and other useful options, read below about the <code>sbatch</code> command, and see Running jobs on midway. Note that all options available in the <code>sbatch</code> command are also available for the <code>sinteractive</code> command.</p>
<h3 id="srun">srun</h3>
<p>An alternative to the <code>sinteractive</code> command is the <code>srun</code> command:</p>
<div class="highlight"><pre><span></span><code>$ srun --pty bash
</code></pre></div>
<p>Unlike <code>sinteractive</code>, this command does not set up X11 forwarding, which means you cannot display graphics using <code>srun</code>. Both the <code>srun</code> and <code>sinteractive</code> commands have the same command options.</p>
<h3 id="batch-jobs">Batch Jobs¶</h3>
<p>The <code>sbatch</code> command is the command most commonly used by RCC users to request computing resources on the Midway cluster including DaLi. Rather than specify all the options in the command line, users typically write an sbatch script that contains all the commands and parameters necessary to run the program on the cluster.</p>
<p>In an sbatch script, all Slurm parameters are declared with <code>#SBATCH</code>, followed by additional definitions.</p>
<p>Here is an example of an sbatch script:</p>
<div class="highlight"><pre><span></span><code>#!/bin/bash
#SBATCH --job-name=example_sbatch
#SBATCH --output=example_sbatch.out
#SBATCH --error=example_sbatch.err
#SBATCH --time=00:05:00
#SBATCH --partition=dali
#SBATCH --nodes=4
#SBATCH --ntasks-per-node=20
#SBATCH --mem-per-cpu=3000
#SBATCH --account=pi-rcc

module load openmpi
mpirun ./hello-mpi
</code></pre></div>
<p>Here is an explanation of what each of these options does:</p>
<table>
<thead>
<tr>
<th align="left">Option</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>#SBATCH --job-name=example_sbatch</code></td>
<td align="left">Assigns label example_sbatch to the job.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --output=example_sbatch.out</code></td>
<td align="left">Writes console output to file example_sbatch.out.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --error=example_sbatch.err</code></td>
<td align="left">Writes an error messages to file example_sbatch.err.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --time=01:30:00</code></td>
<td align="left">Reserves the computing resources for 1 hour and 30 minutes (or less if program completes before 1.5 hours).</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --partition=dali</code></td>
<td align="left">Requests compute nodes from the DaLi partition on the Midway cluster.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --nodes=4</code></td>
<td align="left">Requests 4 compute nodes.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --ntasks-per-node=20</code></td>
<td align="left">Requests 20 cores (CPUs) per node, for a total of 20 * 4 = 80 cores.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --mem-per-cpu=3000</code></td>
<td align="left">Requests 3000 MB (3 GB) of memory (RAM) per core, for a total of 3 * 20 = 60 GB per node.</td>
</tr>
<tr>
<td align="left"><code>#SBATCH --account=pi-rcc</code></td>
<td align="left">Use SU from the pi-rcc account allocation.</td>
</tr>
</tbody>
</table>
<p>In this example, we have requested 4 compute nodes with 20 CPUs each. Therefore, we have requested a total of 60 CPUs for running our program. The last two lines of the script load the OpenMPI module and launch the MPI-based executable that we have called <code>hello-mpi</code> (see <a href="https://rcc.uchicago.edu/docs/running-jobs/mpi/index.html#mpi-jobs">MPI jobs</a>).</p>
<p>Continuing the example above, suppose that this script is saved in the current directory into a file called <code>example.sbatch</code>. This script is submitted to the cluster using the following command:</p>
<div class="highlight"><pre><span></span><code>$ sbatch ./example.sbatch
</code></pre></div>
<p>Many other options are available for submitting jobs using the <code>sbatch</code> command. For more specialized computational needs, see <a href="https://rcc.uchicago.edu/docs/running-jobs/index.html#running-jobs">Running jobs on midway</a>. Additionally, for a complete list of the available options, see the <a href="http://slurm.schedmd.com/sbatch.html">Official SBATCH Documentation</a>.</p>
<h3 id="managing-jobs">Managing Jobs</h3>
<p>The Slurm job scheduler provides several command-line tools for checking on the status of your jobs and for managing them. For a complete list of Slurm commands, see the <a href="http://slurm.schedmd.com/man_index.html">Slurm man pages</a>. Here are a few commands that you may find particularly useful:</p>
<ul>
<li><code>squeue</code>: finds out the status of jobs submitted by you and other users.</li>
<li><code>sacct</code>: retrieves job history and statistics about past jobs.</li>
<li><code>scancel</code>: cancels jobs you have submitted.</li>
</ul>
<p>In the next couple sections we explain how to use <code>squeue</code> to find out the status of your submitted jobs, and <code>scancel</code> to cancel jobs in the queue.</p>
<h4 id="checking-your-jobs">Checking your jobs</h4>
<p>Use the <code>squeue</code> command to check on the status of your jobs, and other jobs running on Midway. The simplest invocation lists all jobs that are currently running or waiting in the job queue (“pending”), along with details about each job such as the job id and the number of nodes requested:</p>
<div class="highlight"><pre><span></span><code>$ squeue
</code></pre></div>
<p>Any job with <code>0:00</code> under the <code>TIME</code> column is a job that is still waiting in the queue.</p>
<p>To view only the jobs that you have submitted, use the <code>--user</code> flag</p>
<div class="highlight"><pre><span></span><code>$ squeue --user=$USER
</code></pre></div>
<p>This command has many other useful options for querying the status of the queue and getting information about individual jobs. For example, to get information about all jobs that are waiting to run on DaLi partition, enter:</p>
<div class="highlight"><pre><span></span><code>$ squeue --state=PENDING --partition=dali
</code></pre></div>
<p>Alternatively, to get information about all your jobs that are running on the DaLi partition, type:</p>
<div class="highlight"><pre><span></span><code>$ squeue --state=RUNNING --partition=dali --user=$USER
</code></pre></div>
<p>The last column of the output tells us which nodes are allocated for each job. For example, if it shows <code>dali-012</code> for one of the jobs under your name, you may type <code>ssh DaLI-012</code> to log in to that compute node and inspect the progress of your computation locally.</p>
<p>For more information, consult the command-line help by typing <code>squeue --help</code>, or visit the official online documentation.</p>
<h4 id="canceling-your-jobs">Canceling your jobs</h4>
<p>To cancel a job you have submitted, use the <code>scancel</code> command. This requires you to specify the id of the job you wish to cancel. For example, to cancel a job with <code>id 8885128</code>, do the following:</p>
<div class="highlight"><pre><span></span><code>$ scancel 8885128
</code></pre></div>
<p>If you are unsure what is the id of the job you would like to cancel, see the JOBID column from running <code>squeue --user=$USER</code>.</p>
<p>To cancel all jobs you have submitted that are either running or waiting in the queue, enter the following:</p>
<div class="highlight"><pre><span></span><code>$ scancel --user=$USER
</code></pre></div>
<h4 id="job-limits">Job Limits</h4>
<p>To distribute computational resources fairly to all Midway users even among DaLi users, the RCC sets limits on the amount of computing resources that may be requested by a single user at any given time.</p>
<p>On DaLi, the maximum run-time for an individual job is 36 hours. The maximum number of jobs per user is 200 and the maximum number of jobs that each user can submit is 500. These apply to all batch and interactive jobs submitted to DaLi compute nodes.</p>
<h3 id="temporary-file-storage">Temporary File Storage</h3>
<p>Many applications generate temporary or intermediate files that are written to <code>/tmp</code>. (These applications may write files to <code>/tmp</code> even without you being aware that this is happening.) This folder is typically on a local drive or the RAM disk that virtualized in the system memory.</p>
<p>Contents in <code>/tmp</code> left by a user’s job won’t be automatically purged before rebooting the corresponding node, and therefore may affect other jobs later running on the same node. Therefore, RCC enforces a data purge policy for files written to <code>/tmp</code> on compute nodes:</p>
<ol>
<li>
<p>For each running job, a special “job-protected” folder <code>/tmp/jobs/${SLURM_JOB_ID}</code> is created on each allocated node. Its contents are safely purged only upon termination of the job (when it is sucessfully completed, canceled or killed).</p>
</li>
<li>
<p>For any running jobs, environment variables <code>SLURM_TMPDIR</code> and <code>TMPDIR</code> are set to <code>/tmp/jobs/${SLURM_JOB_ID}</code>. Whenever possible, users should write to the paths specified by these environment variables rather than using <code>/tmp</code> explicitly. (Most applications should already be using these environment variables by default, so in many cases this will not require any change to your code.)</p>
</li>
<li>
<p>In addition to using <code>$TMPDIR</code>, users should also verify that no additional files are being written to <code>/tmp</code>.</p>
</li>
<li>
<p>Note that upon termination of a job, any folders or files directly under <code>/tmp</code> that belong to the submitter of this job will be purged.</p>
</li>
<li>
<p>The contents of <code>/tmp</code> do not persist after jobs terminate. The RCC is not responsible for retrieving or recovering data stored there. For critical outputs, please save them to the persisent file storage systems.</p>
</li>
</ol>
<p>Note: Folders or files created by users in <code>/tmp</code> outside <code>$TMPDIR</code> are NOT job-protected. For example, consider the case when user has two running jobs (A and B) on the same node, and job B is directly writing files in <code>/tmp</code>. If job A terminates before job B, the contents of <code>/tmp</code> will be also purged, and in some cases may cause job B to fail. To avoid failure, users should therefore write any temporary data to the job-protected folder, <code>SLURM_TMPDIR</code> or <code>TMPDIR</code>.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>